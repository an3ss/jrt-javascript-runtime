/*
 jRT.js - v20.058
 http://github.com/an3ss/jrt-javascript-runtime

 Copyright (c) 2020 Andr√©s Moreno;
 Licensed under the MIT license
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(a){return a.raw=a};$jscomp.createTemplateTagFirstArgWithRaw=function(a,b){a.raw=b;return a};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};
$jscomp.arrayFromIterator=function(a){for(var b,c=[];!(b=a.next()).done;)c.push(b.value);return c};$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(a){var b=function(){};b.prototype=a;return new b};$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};
$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(a,b){var c=$jscomp.propertyToPolyfillSymbol[b];if(null==c)return a[b];c=a[c];return void 0!==c?c:a[b]};$jscomp.polyfill=function(a,b,c,d){b&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(a,b,c,d):$jscomp.polyfillUnisolated(a,b,c,d))};
$jscomp.polyfillUnisolated=function(a,b,c,d){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var f=a[d];if(!(f in c))return;c=c[f]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})};
$jscomp.polyfillIsolated=function(a,b,c,d){var f=a.split(".");a=1===f.length;d=f[0];d=!a&&d in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var l=0;l<f.length-1;l++){var m=f[l];if(!(m in d))return;d=d[m]}f=f[f.length-1];c=$jscomp.IS_SYMBOL_NATIVE&&"es6"===c?d[f]:null;b=b(c);null!=b&&(a?$jscomp.defineProperty($jscomp.polyfills,f,{configurable:!0,writable:!0,value:b}):b!==c&&($jscomp.propertyToPolyfillSymbol[f]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(f):$jscomp.POLYFILL_PREFIX+f,f=
$jscomp.propertyToPolyfillSymbol[f],$jscomp.defineProperty(d,f,{configurable:!0,writable:!0,value:b})))};
$jscomp.getConstructImplementation=function(){function a(){function c(){}new c;Reflect.construct(c,[],function(){});return new c instanceof c}if($jscomp.TRUST_ES6_POLYFILLS&&"undefined"!=typeof Reflect&&Reflect.construct){if(a())return Reflect.construct;var b=Reflect.construct;return function(c,d,f){c=b(c,d);f&&Reflect.setPrototypeOf(c,f.prototype);return c}}return function(c,d,f){void 0===f&&(f=c);f=$jscomp.objectCreate(f.prototype||Object.prototype);return Function.prototype.apply.call(c,f,d)||
f}};$jscomp.construct={valueOf:$jscomp.getConstructImplementation}.valueOf();$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},b={};try{return b.__proto__=a,b.a}catch(c){}return!1};$jscomp.setPrototypeOf=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null;
$jscomp.inherits=function(a,b){a.prototype=$jscomp.objectCreate(b.prototype);a.prototype.constructor=a;if($jscomp.setPrototypeOf){var c=$jscomp.setPrototypeOf;c(a,b)}else for(c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.superClass_=b.prototype};$jscomp.polyfill("Reflect",function(a){return a?a:{}},"es6","es3");$jscomp.polyfill("Reflect.construct",function(a){return $jscomp.construct},"es6","es3");
$jscomp.polyfill("Reflect.setPrototypeOf",function(a){if(a)return a;if($jscomp.setPrototypeOf){var b=$jscomp.setPrototypeOf;return function(c,d){try{return b(c,d),!0}catch(f){return!1}}}return null},"es6","es5");$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(a){if(a)return a;var b=function(f,l){this.$jscomp$symbol$id_=f;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:l})};b.prototype.toString=function(){return this.$jscomp$symbol$id_};var c=0,d=function(f){if(this instanceof d)throw new TypeError("Symbol is not a constructor");return new b("jscomp_symbol_"+(f||"")+"_"+c++,f)};return d},"es6","es3");
$jscomp.polyfill("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var b="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),c=0;c<b.length;c++){var d=$jscomp.global[b[c]];"function"===typeof d&&"function"!=typeof d.prototype[a]&&$jscomp.defineProperty(d.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return a},"es6",
"es3");$jscomp.iteratorPrototype=function(a){a={next:a};a[Symbol.iterator]=function(){return this};return a};$jscomp.iteratorFromArray=function(a,b){a instanceof String&&(a+="");var c=0,d=!1,f={next:function(){if(!d&&c<a.length){var l=c++;return{value:b(l,a[l]),done:!1}}d=!0;return{done:!0,value:void 0}}};f[Symbol.iterator]=function(){return f};return f};
$jscomp.polyfill("Array.prototype.entries",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(b,c){return[b,c]})}},"es6","es3");$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(b){return b})}},"es6","es3");$jscomp.owns=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};
$jscomp.assign=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.assign?Object.assign:function(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c];if(d)for(var f in d)$jscomp.owns(d,f)&&(a[f]=d[f])}return a};$jscomp.polyfill("Object.assign",function(a){return a||$jscomp.assign},"es6","es3");$jscomp.checkEs6ConformanceViaProxy=function(){try{var a={},b=Object.create(new $jscomp.global.Proxy(a,{get:function(c,d,f){return c==a&&"q"==d&&f==b}}));return!0===b.q}catch(c){return!1}};
$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();
$jscomp.polyfill("WeakMap",function(a){function b(){if(!a||!Object.seal)return!1;try{var e=Object.seal({}),g=Object.seal({}),k=new a([[e,2],[g,3]]);if(2!=k.get(e)||3!=k.get(g))return!1;k.delete(e);k.set(g,4);return!k.has(e)&&4==k.get(g)}catch(r){return!1}}function c(){}function d(e){var g=typeof e;return"object"===g&&null!==e||"function"===g}function f(e){if(!$jscomp.owns(e,m)){var g=new c;$jscomp.defineProperty(e,m,{value:g})}}function l(e){if(!$jscomp.ISOLATE_POLYFILLS){var g=Object[e];g&&(Object[e]=
function(k){if(k instanceof c)return k;Object.isExtensible(k)&&f(k);return g(k)})}}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(b())return a;var m="$jscomp_hidden_"+Math.random();l("freeze");l("preventExtensions");l("seal");var n=0,h=function(e){this.id_=(n+=Math.random()+1).toString();if(e){e=$jscomp.makeIterator(e);for(var g;!(g=e.next()).done;)g=g.value,this.set(g[0],g[1])}};h.prototype.set=function(e,g){if(!d(e))throw Error("Invalid WeakMap key");
f(e);if(!$jscomp.owns(e,m))throw Error("WeakMap key fail: "+e);e[m][this.id_]=g;return this};h.prototype.get=function(e){return d(e)&&$jscomp.owns(e,m)?e[m][this.id_]:void 0};h.prototype.has=function(e){return d(e)&&$jscomp.owns(e,m)&&$jscomp.owns(e[m],this.id_)};h.prototype.delete=function(e){return d(e)&&$jscomp.owns(e,m)&&$jscomp.owns(e[m],this.id_)?delete e[m][this.id_]:!1};return h},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(a){function b(){if($jscomp.ASSUME_NO_NATIVE_MAP||!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var h=Object.seal({x:4}),e=new a($jscomp.makeIterator([[h,"s"]]));if("s"!=e.get(h)||1!=e.size||e.get({x:4})||e.set({x:4},"t")!=e||2!=e.size)return!1;var g=e.entries(),k=g.next();if(k.done||k.value[0]!=h||"s"!=k.value[1])return!1;k=g.next();return k.done||4!=k.value[0].x||"t"!=k.value[1]||!g.next().done?!1:!0}catch(r){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(b())return a;var c=new WeakMap,d=function(h){this.data_={};this.head_=m();this.size=0;if(h){h=$jscomp.makeIterator(h);for(var e;!(e=h.next()).done;)e=e.value,this.set(e[0],e[1])}};d.prototype.set=function(h,e){h=0===h?0:h;var g=f(this,h);g.list||(g.list=this.data_[g.id]=[]);g.entry?g.entry.value=e:(g.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:h,value:e},g.list.push(g.entry),
this.head_.previous.next=g.entry,this.head_.previous=g.entry,this.size++);return this};d.prototype.delete=function(h){h=f(this,h);return h.entry&&h.list?(h.list.splice(h.index,1),h.list.length||delete this.data_[h.id],h.entry.previous.next=h.entry.next,h.entry.next.previous=h.entry.previous,h.entry.head=null,this.size--,!0):!1};d.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=m();this.size=0};d.prototype.has=function(h){return!!f(this,h).entry};d.prototype.get=function(h){return(h=
f(this,h).entry)&&h.value};d.prototype.entries=function(){return l(this,function(h){return[h.key,h.value]})};d.prototype.keys=function(){return l(this,function(h){return h.key})};d.prototype.values=function(){return l(this,function(h){return h.value})};d.prototype.forEach=function(h,e){for(var g=this.entries(),k;!(k=g.next()).done;)k=k.value,h.call(e,k[1],k[0],this)};d.prototype[Symbol.iterator]=d.prototype.entries;var f=function(h,e){var g=e&&typeof e;"object"==g||"function"==g?c.has(e)?g=c.get(e):
(g=""+ ++n,c.set(e,g)):g="p_"+e;var k=h.data_[g];if(k&&$jscomp.owns(h.data_,g))for(h=0;h<k.length;h++){var r=k[h];if(e!==e&&r.key!==r.key||e===r.key)return{id:g,list:k,index:h,entry:r}}return{id:g,list:k,index:-1,entry:void 0}},l=function(h,e){var g=h.head_;return $jscomp.iteratorPrototype(function(){if(g){for(;g.head!=h.head_;)g=g.previous;for(;g.next!=g.head;)return g=g.next,{done:!1,value:e(g)};g=null}return{done:!0,value:void 0}})},m=function(){var h={};return h.previous=h.next=h.head=h},n=0;
return d},"es6","es3");
$jscomp.polyfill("Set",function(a){function b(){if($jscomp.ASSUME_NO_NATIVE_SET||!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var d=Object.seal({x:4}),f=new a($jscomp.makeIterator([d]));if(!f.has(d)||1!=f.size||f.add(d)!=f||1!=f.size||f.add({x:4})!=f||2!=f.size)return!1;var l=f.entries(),m=l.next();if(m.done||m.value[0]!=d||m.value[1]!=d)return!1;m=l.next();return m.done||m.value[0]==d||4!=m.value[0].x||m.value[1]!=m.value[0]?!1:l.next().done}catch(n){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(b())return a;var c=function(d){this.map_=new Map;if(d){d=$jscomp.makeIterator(d);for(var f;!(f=d.next()).done;)this.add(f.value)}this.size=this.map_.size};c.prototype.add=function(d){d=0===d?0:d;this.map_.set(d,d);this.size=this.map_.size;return this};c.prototype.delete=function(d){d=this.map_.delete(d);this.size=this.map_.size;return d};c.prototype.clear=function(){this.map_.clear();this.size=0};c.prototype.has=
function(d){return this.map_.has(d)};c.prototype.entries=function(){return this.map_.entries()};c.prototype.values=function(){return this.map_.values()};c.prototype.keys=c.prototype.values;c.prototype[Symbol.iterator]=c.prototype.values;c.prototype.forEach=function(d,f){var l=this;this.map_.forEach(function(m){return d.call(f,m,m,l)})};return c},"es6","es3");
$jscomp.polyfill("Array.from",function(a){return a?a:function(b,c,d){c=null!=c?c:function(n){return n};var f=[],l="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];if("function"==typeof l){b=l.call(b);for(var m=0;!(l=b.next()).done;)f.push(c.call(d,l.value,m++))}else for(l=b.length,m=0;m<l;m++)f.push(c.call(d,b[m],m));return f}},"es6","es3");var jrt={};jrt.Runtime=function(){};jrt.Runtime.initializer=function(){document.addEventListener("DOMContentLoaded",jrt.Runtime.handleDomContentLoaded.bind(jrt.Runtime))};
jrt.Runtime.handleDomContentLoaded=function(a){try{var b=eval(jrt.Runtime.appClassName)}catch(c){jrt.Runtime.log(null,new jrt.JrtError('The name "'+jrt.Runtime.appClassName+'" cannot be evaluated',c));return}b==jrt.App||jrt.App.isPrototypeOf(b)?(jrt.Runtime.appClass=b,"cordova"in window?document.addEventListener("deviceready",jrt.Runtime.handleDeviceReady.bind(jrt.Runtime)):jrt.Runtime.handleDeviceReady()):jrt.Runtime.log(null,new jrt.JrtError('The name "'+jrt.Runtime.appClassName+'" does not evaluate to a subclass of jrt.App'))};
jrt.Runtime.handleDeviceReady=function(a){jrt.Runtime.platform="cordova"in window?cordova.platformId:"web";jrt.Runtime.trace("Starting instance of "+jrt.Runtime.appClassName+" on "+jrt.Runtime.platform+" platform");try{jrt.Runtime.initialBody=document.body.cloneNode(!0),new jrt.Runtime.appClass,window.addEventListener("unload",jrt.Runtime.handleClose.bind(jrt.Runtime)),"cordova"in window&&(document.addEventListener("pause",jrt.Runtime.handlePause.bind(jrt.Runtime)),document.addEventListener("resume",
jrt.Runtime.handleResume.bind(jrt.Runtime)),document.addEventListener("backbutton",jrt.Runtime.handleDeviceBackButton.bind(jrt.Runtime))),jrt.App.instance.start()}catch(b){delete jrt.App.instance,jrt.Runtime.log(null,b)}};jrt.Runtime.isOffline=function(){return"onLine"in navigator?!navigator.onLine:null==jrt.Ajax.lastRequestStatus?null:"error"==jrt.Ajax.lastRequestStatus||"timeout"==jrt.Ajax.lastRequestStatus};
jrt.Runtime.restart=function(){jrt.Runtime.trace("Restarting app...");document.body.replaceWith(jrt.Runtime.initialBody.cloneNode(!0));jrt.App.instance.currentPageRequest=null;jrt.LocaleBundle.current=null;try{new jrt.Runtime.appClass,jrt.App.instance.start()}catch(a){delete jrt.App.instance,jrt.Runtime.log(null,a)}throw new jrt.JrtError;};jrt.Runtime.reload=function(){jrt.Runtime.trace("Reloading app...");location.href="";throw new jrt.JrtError;};jrt.Runtime.exit=function(){"cordova"in window&&navigator.app.exitApp()};
jrt.Runtime.createTarget=function(a,b){var c=""==a?document.body:document.getElementById(a);if(b)try{var d=eval(b)}catch(f){throw new jrt.JrtError('Cannot evaluate class name "'+b+'" for target #'+a,f);}if(null==d||d==c){if(null==c)throw new jrt.JrtError("No target defined for id '"+a+"'");"DIALOG"==c.tagName?(d=new jrt.Dialog(c),d.className="jrt.Dialog"):(d=new jrt.Page(c),d.className="jrt.Page")}else if("function"==typeof d){if(null==c){if(jrt.View.isPrototypeOf(d))throw new jrt.JrtError('No view element found with id "'+
a+'"');if(!jrt.Action.isPrototypeOf(d))throw new jrt.JrtError("Class "+b+' for target id "'+a+'" does not implement jrt.Target');d=new d(a)}else{if(!jrt.View.isPrototypeOf(d))throw new jrt.JrtError("Class "+b+" for view #"+a+" does not extend jrt.Page or jrt.Dialog");d=new d(c)}d.className=b}else throw new jrt.JrtError('Class name "'+b+'" for target #'+a+" does not evaluate to a class");if(null!=c)if(d instanceof jrt.Page){if(c!=document.body&&("SECTION"!=c.tagName||c.parentElement!=document.body))throw new jrt.JrtError("The "+
c.tagName+' element with id "'+a+'" is not a valid page element');}else if("DIALOG"!=c.tagName||c.parentElement!=document.body)throw new jrt.JrtError("The "+c.tagName+' element with id "'+a+'" is not a valid dialog element');return d};
jrt.Runtime.log=function(a,b){b?(b instanceof jrt.JrtError?(a?console.warn("jRT: "+a):null==jrt.App.instance&&(a="App configuration error",console.warn("jRT: "+a)),b.message&&console.error(b.toString()),b.cause&&console.error(b.cause)):(a=a||"Error in client code",console.warn("jRT: "+a),console.error(b)),null==jrt.App.instance&&jrt.SystemDialogBox.alert(a)):console.warn("jRT: "+a)};jrt.Runtime.trace=function(a){console.debug("jRT: "+a)};jrt.Runtime.handleClose=function(a){jrt.App.instance.closed()};
jrt.Runtime.handlePause=function(a){jrt.App.instance.paused()};jrt.Runtime.handleResume=function(a){jrt.App.instance.resumed()};jrt.Runtime.handleDeviceBackButton=function(a){a.preventDefault();jrt.App.instance.navigateBack()};jrt.Runtime.location=new URL(location.href);jrt.Runtime.isTouch="ontouchstart"in window;jrt.Runtime.appClassName=document.currentScript.className||"jrt.App";jrt.Runtime.initializer();jrt.JrtError=function(a,b){a=Error.call(this,a);this.message=a.message;"stack"in a&&(this.stack=a.stack);this.cause=b||null;this.name="JrtError"};$jscomp.inherits(jrt.JrtError,Error);jrt.Ajax=function(){this.app=jrt.App.instance};jrt.Ajax.include=function(a,b){var c=jrt.App.instance.version;a=c?a+"?"+c:a;c=new XMLHttpRequest;c.overrideMimeType("text/plain");c.open("GET",a,!1);c.send();b.innerHTML=c.responseText||""};jrt.Ajax.loadJsonFile=function(a,b){var c=jrt.App.instance.version;a=c?a+"?"+c:a;c=new XMLHttpRequest;c.overrideMimeType("text/plain");c.open("GET",a,!1);c.send();return b?(jrt.Ajax.obj=null,eval("jrt.Ajax.obj="+c.responseText),jrt.Ajax.obj):JSON.parse(c.responseText)};
jrt.Ajax.prototype.sendRequest=function(a){a.method=a.method?a.method.toUpperCase():"GET";a.servicePath=a.servicePath||"";a.serviceName=a.serviceName||"";a.params=a.params||{};a.background=a.background||!1;a.safe=null==a.safe?"GET"==a.method||"HEAD"==a.method:a.safe;null==a.responseType?a.responseType="json":""==a.responseType&&(a.responseType="text");null==a.timeout&&(a.timeout=3E4);if("onLine"in navigator&&!navigator.onLine)jrt.Runtime.trace(">> "+a.method+" request [OFFLINE] '"+(a.servicePath+
a.serviceName)+"'"),setTimeout(this.processResponse.bind(this,a,"offline",null));else if(a.safe||"TEST"!=this.app.version&&("web"!=jrt.Runtime.platform||"file:"!=location.protocol)){jrt.Runtime.trace(">> "+a.method+" request '"+(a.servicePath+a.serviceName)+"'");a.background||this.app.wait();var b=null;if(a.formData)for(var c in a.params)a.formData.append(c,a.params[c]);else b=function m(f,l){var n=[];for(e in f){var h=f[e];var e=null==l?e:l+"["+e+"]";null==h?n.push(e+"="):h instanceof Object?n.push(m(h,
e)):"string"==typeof h?n.push(e+"="+encodeURIComponent(h)):n.push(e+"="+h)}return n.join("&")}(a.params,null);a.xhr=new XMLHttpRequest;a.xhr.timeout=a.timeout;a.xhr.responseType=a.responseType;a.xhr.onload=a.xhr.onerror=a.xhr.ontimeout=this.processXhrResponse.bind(this,a);if("GET"==a.method||"DELETE"==a.method||"HEAD"==a.method)a.xhr.open(a.method,""+a.baseUrl+a.servicePath+a.serviceName+"?"+b,!0),a.xhr.send();else if("POST"==a.method||"PUT"==a.method||"PATCH"==a.method)a.xhr.open(a.method,a.baseUrl+
a.servicePath+a.serviceName,!0),b?(a.xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),a.xhr.send(b)):a.xhr.send(a.formData);else throw Error("The method "+a.method+" is not supported");}else jrt.Runtime.log(">> "+a.method+" request [TEST] '"+(a.servicePath+a.serviceName)+"'"),setTimeout(this.processResponse.bind(this,a,"success",{}))};jrt.Ajax.prototype.processResponse=function(a,b,c){};
jrt.Ajax.prototype.processXhrResponse=function(a,b){b="load"==b.type?304==a.xhr.status||0==a.xhr.status||200<=a.xhr.status&&300>a.xhr.status?null==a.xhr.response?"type-error":"success":"server-error":b.type;jrt.Ajax.lastRequestStatus=b;jrt.Runtime.trace("<< "+a.method+" response ["+b+"] '"+(a.servicePath+a.serviceName)+"'");a.background||this.app.endWait();try{this.processResponse(a,b,a.xhr.response)}catch(c){this.app.processClientError(c)}};jrt.Ajax.lastRequestStatus=null;jrt.AjaxRequest=function(){};jrt.Element=function(a){jrt.Ajax.call(this);this.element=a};$jscomp.inherits(jrt.Element,jrt.Ajax);jrt.Element.get=function(a){return document.getElementById(a)};jrt.Element.createFragment=function(a){var b=Array.isArray(a)?a:[a];a=document.createDocumentFragment();b=$jscomp.makeIterator(b);for(var c=b.next();!c.done;c=b.next())if(c=c.value,"string"==typeof c){var d=document.createElement("div");for(d.innerHTML=c;d.firstChild;)a.appendChild(d.firstChild)}else a.appendChild(c);return a};
jrt.Element.create=function(a,b,c,d){return jrt.Element.createElement(a,null,null,b,c,d)};jrt.Element.a=function(a,b,c,d){return jrt.Element.createElement("a","href",a,b,c,d)};jrt.Element.label=function(a,b,c,d){return jrt.Element.createElement("label","htmlFor",a||"",b,c,d)};jrt.Element.input=function(a,b,c,d,f){b=jrt.Element.createElement("input","name",b||"",null,d,f);b.type=a;b.value=null==c?"":c;return b};
jrt.Element.textarea=function(a,b,c,d,f){a=jrt.Element.createElement("textarea","name",a||"",b||"",d,f);a.rows=c||2;return a};jrt.Element.button=function(a,b,c,d){b=jrt.Element.createElement("button","type","button",b,c,d);null!=a&&(b.formAction=a);return b};jrt.Element.select=function(a,b,c){return jrt.Element.createElement("select","name",a,null,b,c)};jrt.Element.option=function(a,b,c){return jrt.Element.createElement("option","value",""+a,b||""+a,c,null)};
jrt.Element.createElement=function(a,b,c,d,f,l){a=document.createElement(a);null!=f&&(a.className=f);null!=l&&(a.title=l);null!=c&&(a[b]=c);d=Array.isArray(d)?jrt.Element.createFragment(d):d||"";d instanceof Node?a.appendChild(d):a.textContent=d;return a};
jrt.Element.prototype.listenToEvent=function(a,b,c,d){b=b||this.element;var f=b["_on"+a+"_capture"];if(b["_on"+a]||f)throw Error('Already listening to "'+a+'" event');c=this.eventHandler.bind(this,c||null);b.addEventListener(a,c,d);b["_on"+a+"_"+(d?"capture":"")]=c};jrt.Element.prototype.ignoreEvent=function(a,b){b=b||this.element;var c=b["_on"+a],d=b["_on"+a+"_capture"];c?(b.removeEventListener(a,c),delete b["_on"+a]):d&&(b.removeEventListener(a,d,!0),delete b["_on"+a+"_capture"])};
jrt.Element.prototype.handleEvent=function(a,b){};jrt.Element.prototype.eventHandler=function(a,b){try{this.handleEvent(b,a)}catch(c){this.app.processClientError(c)}};jrt.Block=function(){jrt.Element.apply(this,arguments)};$jscomp.inherits(jrt.Block,jrt.Element);jrt.Block.prototype.query=function(a,b){return(b||this.element).querySelector(a)};jrt.Block.prototype.queryAll=function(a,b){return(b||this.element).querySelectorAll(a)};jrt.Form=function(a){jrt.Block.call(this,a||jrt.Element.create("form"))};$jscomp.inherits(jrt.Form,jrt.Block);jrt.Form.getValue=function(a){var b=a instanceof HTMLOptionElement?"select-multiple"==a.parentElement.type?"string":a.dataset.type||"string":a.dataset.type||"string";if("number"==b)return+a.value.trim().replace(",",".");"string"!=b&&jrt.Runtime.log('Data type "'+b+"\" in form field '"+a.name+'\' not valid ("string" assumed)');return jrt.Form.trimValues?a.value.trim():a.value};
jrt.Form.getSubmitValue=function(a){if(a instanceof RadioNodeList){var b=$jscomp.makeIterator(a);for(a=b.next();!a.done;a=b.next())if(a=a.value,a.checked)return jrt.Form.getValue(a);return""}if(!a.disabled){if("select-multiple"==a.type){b=[];a=$jscomp.makeIterator(a.options);for(var c=a.next();!c.done;c=a.next())c=c.value,c.selected&&b.push(jrt.Form.getValue(c));return b.join(";")}if("checkbox"==a.type)if(a.hasAttribute("value")){if(a.checked)return jrt.Form.getValue(a)}else return a.checked;else if("radio"==
a.type){if(a.checked)return jrt.Form.getValue(a)}else if("submit"==a.type||!(a instanceof HTMLButtonElement))return jrt.Form.getValue(a)}return null};jrt.Form.getSubmitData=function(a,b,c){a=$jscomp.makeIterator(a.elements);for(var d=a.next();!d.done;d=a.next())if(d=d.value,d instanceof HTMLSelectElement||d instanceof HTMLInputElement||d instanceof HTMLTextAreaElement){if(d.name){var f=jrt.Form.getSubmitValue(d);null!=f&&(c[d.name]=f)}}else d==b&&d.name&&(c[d.name]=jrt.Form.getValue(b))};
jrt.Form.prototype.getValues=function(){var a={};jrt.Form.getSubmitData(this.element,null,a);return a};jrt.Form.prototype.setValues=function(a){for(var b in a){var c=a[b],d=this.element.elements[b];null==d?jrt.Runtime.log('Form control with name "'+b+'" not found'):"boolean"==typeof c?d.checked=c:d.value=c}};jrt.Form.prototype.getControl=function(a){return this.getControlChecked(a)};jrt.Form.prototype.getInput=function(a){return this.getControlChecked(a,HTMLInputElement)};
jrt.Form.prototype.getTextArea=function(a){return this.getControlChecked(a,HTMLTextAreaElement)};jrt.Form.prototype.getRadioGroup=function(a){var b=this.element.elements[a]||null;if(!b||b instanceof RadioNodeList||b instanceof HTMLInputElement)return b;throw Error('Form control "'+a+'" is not a radio button group');};jrt.Form.prototype.getSelect=function(a){return this.getControlChecked(a,HTMLSelectElement)};jrt.Form.prototype.getOutput=function(a){return this.getControlChecked(a,HTMLOutputElement)};
jrt.Form.prototype.getButton=function(a){return this.getControlChecked(a,HTMLButtonElement)};jrt.Form.prototype.getControlChecked=function(a,b){var c=this.element.elements[a]||null;if(b&&c&&!(c instanceof b))throw Error('Form control "'+a+'" is not of type '+b.name);return c};jrt.Form.trimValues=!0;/*
 @protected*/
jrt.App=function(a,b){a=void 0===a?"":a;b=void 0===b?!1:b;jrt.Block.call(this,document.body);this.version=a;this.historyEnabled=b;this.waiting=!1;jrt.App.instance=this;jrt.App.viewCache={}};$jscomp.inherits(jrt.App,jrt.Block);jrt.App.getInstance=function(){return jrt.App.instance};
jrt.App.prototype.start=function(){for(var a=this.queryAll("body > section[id]:not([id=''])"),b=$jscomp.makeIterator(a),c=b.next();!c.done;c=b.next())c.value.hidden=!0;0==a.length?(a="",jrt.Runtime.trace("No page elements found, using <body> as the only page")):a=a.item(0).id;null==this.mainPageId&&(this.mainPageId=a);a=new jrt.AppRequest("load","get",this.getPage(a));this.processPageRequest(a);document.documentElement.classList.add("ready");window.onpopstate=this.handlePopState.bind(this);window.onclick=
this.handleClick.bind(this);window.onsubmit=this.handleSubmit.bind(this)};jrt.App.prototype.getClassNameForTargetId=function(a){return a};jrt.App.prototype.getPage=function(a){return this.getTarget(a,jrt.Page)};jrt.App.prototype.getDialog=function(a){return this.getTarget(a,jrt.Dialog)};jrt.App.prototype.getAction=function(a){return this.getTarget(a,jrt.Action)};
jrt.App.prototype.getTarget=function(a,b){if("back"==a)var c=new jrt.Action(a);else(c=jrt.App.viewCache[a])||(c=jrt.Runtime.createTarget(a,this.getClassNameForTargetId(a)));if(b&&!(c instanceof b))throw new jrt.JrtError("Target #"+a+" is not a "+b.name);c instanceof jrt.View&&(jrt.App.viewCache[a]=c);return c};jrt.App.prototype.clearViewCache=function(a){null==a?jrt.App.viewCache={}:delete jrt.App.viewCache[a]};jrt.App.prototype.getLocale=function(){return jrt.LocaleBundle.current};
jrt.App.prototype.paused=function(){};jrt.App.prototype.resumed=function(){};jrt.App.prototype.closed=function(){};jrt.App.prototype.error=function(a){};jrt.App.prototype.pageRequested=function(a){};jrt.App.prototype.dialogRequested=function(a){};jrt.App.prototype.dialogClosed=function(a){};jrt.App.prototype.actionFinished=function(a){};
jrt.App.prototype.navigateTo=function(a,b,c){if(this.waiting)throw new jrt.JrtError("Cannot go to page #"+a+" because the app is waiting");a=this.getPage(a);b=new jrt.AppRequest("call","post"==c?c:"get",a,b);null==this.currentPageRequest?(b.redirect="replace"==c?c:null,this.processRequest(b)):(b.redirect="redirect",b.source=this.currentPageRequest.source,b.sourceView=this.currentPageRequest.sourceView,b.sourceElement=this.currentPageRequest.sourceElement,this.processPageRequest(b))};
jrt.App.prototype.navigateBack=function(){var a=new jrt.AppRequest("call",null,new jrt.Action("back"));this.processActionRequest(a)};jrt.App.prototype.openDialog=function(a,b){this.getDialog(a).open(b)};jrt.App.prototype.execute=function(a,b){if(this.waiting)throw new jrt.JrtError("Cannot execute action #"+a+" because the app is waiting");a=new jrt.AppRequest("call",null,this.getAction(a),b);this.processActionRequest(a)};
jrt.App.prototype.wait=function(){this.waiting?jrt.Runtime.log("The app is already waiting"):(this.waiting=!0,document.documentElement.classList.add("wait"),jrt.Runtime.trace("App waiting..."))};jrt.App.prototype.endWait=function(){this.waiting?(this.waiting=!1,document.documentElement.classList.remove("wait"),jrt.Runtime.trace("...end of wait")):jrt.Runtime.log("The app is not waiting")};
jrt.App.prototype.handlePopState=function(a){if("close"==this.historyBackType||"error"==this.historyBackType)this.historyBackType=null;else{try{if("action"==this.historyBackType){var b="link";var c=this.pendingHashUrl;this.pendingHashUrl=null;var d=this.getTarget(c.id);this.historyBackType=null;var f=!0}else c=jrt.HashUrl.parse(location.hash),d=this.getTarget(c.id),b=a.state?"history":"link","back"==d.id?(this.historyBackType="action",this.pendingHashUrl=c,f=!1):"history"==b&&this.currentView instanceof
jrt.Dialog?(d instanceof jrt.Dialog?this.historyBackType=null:(this.historyBackType="history",d=new jrt.Action("back")),f=!0):"history"==b||this.historyEnabled&&d instanceof jrt.View?(this.historyBackType=null,f=!0):(this.historyBackType="action",this.pendingHashUrl=c,f=!1)}catch(l){jrt.Runtime.log(null,l),this.historyBackType="error",f=!1}f?(a=new jrt.AppRequest(b,"get",d,c.params),a.sourceElement="link"==b?document.activeElement:null,this.processRequest(a)):(this.restoreHistory(),history.back())}};
jrt.App.prototype.handleSubmit=function(a){var b=a.target,c=this.submitButton&&this.submitButton.formMethod||b.method;if("dialog"==c)(jrt.Modal.openDialog||this.currentView).setReturnValue(this.submitButton);else{var d=this.submitButton&&this.submitButton.hasAttribute("formaction")?this.submitButton.getAttribute("formaction"):b.getAttribute("action");if(null!=d){var f=jrt.HashUrl.parse(d);if(null==f)return}a.preventDefault();a.stopImmediatePropagation();if(b.hasAttribute("action")||document.activeElement==
this.submitButton)try{var l=this.getTarget(f.id);"back"!=l.id&&jrt.Form.getSubmitData(b,this.submitButton,f.params);var m=new jrt.AppRequest("submit",c,l,f.params);m.sourceElement=b;this.processRequest(m)}catch(n){jrt.Runtime.log(null,n)}}};
jrt.App.prototype.handleClick=function(a){this.submitButton=null;var b=a.target,c=b.closest("a");if(c&&b instanceof HTMLImageElement)"external"!=c.rel&&"image/"==c.type.slice(0,6)&&(a.preventDefault(),jrt.SystemDialogBox.image(c.getAttribute("href")||b.src,c.title||b.alt));else if(c||b instanceof HTMLAreaElement){if(b instanceof HTMLAreaElement&&(c=b),c.hasAttribute("href")){var d=jrt.HashUrl.parse(c.getAttribute("href"));d&&d.id==this.currentView.id&&(a.preventDefault(),d=new jrt.AppRequest("link",
"get",this.currentView,d.params),d.sourceElement=c,this.processRequest(d))}}else if(c=b.closest("button"))if("button"==c.type){if(!c.disabled&&c.hasAttribute("formaction")){a=c.getAttribute("formaction");b=c.getAttribute("formmethod")||"get";var f=jrt.HashUrl.parse(a);if(null==f)jrt.Runtime.log("Button target "+a+" is not a hash URL");else try{"back"!=this.getTarget(f.id).id&&c.hasAttribute("value")&&(c.form?jrt.Form.getSubmitData(c.form,c,f.params):c.name&&(f.params[c.name]=jrt.Form.getValue(c))),
d=new jrt.AppRequest("button",b,this.getTarget(f.id),f.params),d.sourceElement=c,this.processRequest(d)}catch(l){jrt.Runtime.log(null,l)}}}else"submit"==c.type&&(this.submitButton=c)};
jrt.App.prototype.processBackAction=function(a){if(!jrt.Modal.close())if("web"!=jrt.Runtime.platform&&this.currentPage.id==this.mainPageId)jrt.Runtime.exit();else{var b=this.currentPage.getParentId();(b=this.historyEnabled?b:b||this.mainPageId)?(a=new jrt.AppRequest(a,"get",this.getPage(b)),this.processPageRequest(a)):history.back()}};
jrt.App.prototype.processRequest=function(a){if(a.target instanceof jrt.Action)this.processActionRequest(a);else{if(this.currentView instanceof jrt.Dialog){var b=this.currentView;if(a.target instanceof jrt.Page||a.target!=b&&("panel"==b.mode||"stackable"!=a.target.mode)){b.close(null);this.closingDialogPendingRequest=a;return}}a.target instanceof jrt.Page?this.processPageRequest(a):this.processDialogRequest(a)}};
jrt.App.prototype.processPageRequest=function(a){jrt.Runtime.trace("Page requested ["+a.type+", "+a.method+"] "+a.target);this.updateHistory(a);this.currentPageRequest=a;var b=a.target;b.req=a;b!=a.source&&(b.caller=a.source);var c=a.sourceView instanceof jrt.Page?a.sourceView:this.currentPage;if(c&&b!=c&&"redirect"!=a.redirect)try{c.hidden()}catch(d){this.processClientError(d)}this.currentAction&&this.processActionFinished(!1);this.currentView=this.currentPage=b;if(b!=c)try{this.pageRequested(a)}catch(d){this.processClientError(d)}if(this.currentPageRequest==
a){try{b.requested()}catch(d){this.processClientError(d)}if(this.currentPageRequest==a&&(this.currentPageRequest=null,b!=c&&""!=b.id)){c&&(c.element.hidden=!0,document.body.classList.remove(c.id));document.body.classList.add(b.id||"body");b.element.hidden=!1;setTimeout(function(){var d=b.query("[autofocus]:not([disabled])");d&&d.focus()});try{b.shown()}catch(d){this.processClientError(d)}jrt.Runtime.trace("Page shown "+b)}}};
jrt.App.prototype.processDialogRequest=function(a){var b=a.target;jrt.Runtime.trace("Dialog requested ["+a.type+", "+a.method+"] "+b);this.updateHistory(a);b.req=a;b!=a.source&&(b.caller=a.source);this.currentView=b;try{b!=a.sourceView&&this.dialogRequested(a),b.requested()}catch(c){this.processClientError(c)}if(b.id!=a.sourceView.id&&(this.currentView==b||this.currentView instanceof jrt.Dialog&&"stackable"==this.currentView.mode)){b.show();try{b.shown()}catch(c){this.processClientError(c)}}};
jrt.App.prototype.processActionRequest=function(a){var b=a.target;jrt.Runtime.trace("Action requested ["+a.type+"] "+b);if("back"==b.id)this.processBackAction(a.type);else{b.req=a;b.caller=a.source;b.running=!0;this.currentAction=b;try{b.requested()}catch(c){this.processClientError(c),this.processActionFinished(!1)}}};
jrt.App.prototype.processActionFinished=function(a,b){jrt.Runtime.trace("Action "+(a?"finished":"finished implicitly")+" "+this.currentAction);var c=this.currentAction;c.running=!1;this.currentAction=c.caller instanceof jrt.Action&&c.caller.running?c.caller:null;if(a){c.result=b;try{c.caller.actionFinished(c),this.actionFinished(c)}catch(d){this.processClientError(d)}}else null!=this.currentAction&&this.currentAction&&this.processActionFinished(!1)};
jrt.App.prototype.processClientError=function(a){jrt.Runtime.log(null,a);try{this.error(a)}catch(b){jrt.Runtime.log(null,a)}};
jrt.App.prototype.updateHistory=function(a){if(this.historyEnabled){var b="#"+a.target.id;if("load"==a.type){var c=new URL(location.href);c.search="";c.hash=b;history.replaceState(a.type,"",c.href)}else"link"==a.type?history.replaceState(a.type,"",b):"call"==a.type?a.redirect?history.replaceState(a.type,"",b):b!=location.hash&&history.pushState(a.type,"",b):"button"!=a.type&&"submit"!=a.type||b==location.hash||history.pushState(a.type,"",b)}else"load"==a.type&&(a=new URL(location.href),a.search="",
a.hash="",history.replaceState(null,"",a.href))};jrt.App.prototype.restoreHistory=function(){if(this.historyEnabled)history.replaceState("cancel","","#"+this.currentView.id);else{var a=new URL(location.href);a.hash="";history.replaceState(null,"",a.href)}};/*
 @package*/
jrt.AppRequest=function(a,b,c,d){var f=jrt.App.getInstance();this.type=a;this.method=b;this.sourceElement=null;this.sourceView=f.currentView;this.source=f.currentAction||f.currentView;this.target=c;this.params=d||{};this.formData=null};jrt.HashUrl=function(a,b){this.id=a;this.params=b||{}};jrt.HashUrl.parse=function(a){if(0<a.length&&"#"!=a.charAt(0)&&"?"!=a.charAt(0))return null;var b={},c=a.indexOf("?");if(-1==c)var d=a.slice(1);else for(d=a.slice(1,c),a=$jscomp.makeIterator((new URLSearchParams(a.slice(c))).entries()),c=a.next();!c.done;c=a.next())c=c.value,b[c[0]]=c[1];return new jrt.HashUrl(d||jrt.App.instance.currentView.id,b)};
jrt.HashUrl.prototype.format=function(){return(this.id&&"#"+this.id)+(0<Object.keys(this.params).length?"?"+new URLSearchParams(this.params):"")};jrt.Target=function(){};jrt.Target.prototype.requested=function(){};jrt.Target.prototype.actionFinished=function(a){};jrt.Target.prototype.dialogClosed=function(a){};jrt.Action=function(a){jrt.Ajax.call(this);this.id=a};$jscomp.inherits(jrt.Action,jrt.Ajax);jrt.Action.prototype.requested=function(){};jrt.Action.prototype.actionFinished=function(a){};jrt.Action.prototype.dialogClosed=function(a){};jrt.Action.prototype.finish=function(a){a=void 0===a?null:a;if(this.app.currentAction==this)return this.app.processActionFinished(!0,a),!0;jrt.Runtime.log("Cannot finish action "+this+" because it's not running");return!1};
jrt.Action.prototype.toString=function(){return"#"+this.id+"<"+this.className+">"};jrt.TargetView=function(){};$jscomp.inherits(jrt.TargetView,jrt.Target);jrt.TargetView.prototype.shown=function(){};jrt.TargetView.prototype.hidden=function(){};jrt.View=function(a){jrt.Block.call(this,a);this.id=a==document.body?"":a.id;this.form=(a=this.query("form"))?new jrt.Form(a):null};$jscomp.inherits(jrt.View,jrt.Block);jrt.View.prototype.isVisible=function(){};jrt.View.prototype.toString=function(){return"#"+this.id+"<"+this.className+">"};jrt.Page=function(a){jrt.View.call(this,a)};$jscomp.inherits(jrt.Page,jrt.View);jrt.Page.prototype.isVisible=function(){return!this.element.hidden};jrt.Page.prototype.requested=function(){};jrt.Page.prototype.shown=function(){};jrt.Page.prototype.hidden=function(){};jrt.Page.prototype.actionFinished=function(a){};jrt.Page.prototype.dialogClosed=function(a){};jrt.Page.prototype.getParentId=function(){return null};jrt.Modal=function(a){if(null==a){var b=jrt.Element.create("dialog");document.body.appendChild(b);jrt.View.call(this,b)}else jrt.View.call(this,a);this.dynamic=null==a;this.element instanceof HTMLUnknownElement&&dialogPolyfill.registerDialog(this.element);this.element.onclick=this.handleBackdropClick.bind(this);this.element.onclose=this.handleDialogClose.bind(this)};$jscomp.inherits(jrt.Modal,jrt.View);jrt.Modal.close=function(a){return null!=jrt.Modal.openDialog?jrt.Modal.openDialog.close(a):!1};
jrt.Modal.prototype.isVisible=function(){return this.element.open};jrt.Modal.prototype.show=function(){jrt.Modal.openDialog instanceof jrt.DialogBox&&jrt.Modal.openDialog.close();document.body.classList.add("modal");document.body.scrollHeight>document.documentElement.clientHeight&&document.body.classList.add("scroll");this.returnValue=null;this.element.returnValue="";this.element.showModal();jrt.Modal.openDialog=this;jrt.Runtime.trace("Dialog shown "+this)};
jrt.Modal.prototype.close=function(a){return this.element.open?(void 0!==a&&(this.returnValue=a),this.element.close(""+(a||"")),!0):!1};jrt.Modal.prototype.setReturnValue=function(a){this.returnValue=this.element.returnValue};jrt.Modal.prototype.handleDialogClose=function(a){jrt.Modal.openDialog==this&&(jrt.Modal.openDialog=this.parent instanceof jrt.Modal?this.parent:null);null==jrt.Modal.openDialog&&document.body.classList.remove("modal","scroll");this.dynamic&&this.element.parentNode.removeChild(this.element)};
jrt.Modal.prototype.handleBackdropClick=function(a){if(a.target==this.element&&(a.stopPropagation(),!("cordova"in window&&cordova.plugins.Keyboard&&cordova.plugins.Keyboard.isVisible))){var b=this.element.getBoundingClientRect();b.top<=a.clientY&&a.clientY<=b.top+b.height&&b.left<=a.clientX&&a.clientX<=b.left+b.width||(this.returnValue=null,this.element.close())}};jrt.Dialog=function(a,b){b=void 0===b?"root":b;jrt.Modal.call(this,a);this.mode=b};$jscomp.inherits(jrt.Dialog,jrt.Modal);jrt.Dialog.prototype.requested=function(){};jrt.Dialog.prototype.shown=function(){};jrt.Dialog.prototype.hidden=function(){};jrt.Dialog.prototype.actionFinished=function(a){};jrt.Dialog.prototype.dialogClosed=function(a){};
jrt.Dialog.prototype.open=function(a,b){var c=this;this.app.currentView==this||this.element.open?jrt.Runtime.log("The dialog "+this+" is already open"):setTimeout(function(){var d=new jrt.AppRequest("call",b||"get",c,a);d.source=c.app.currentAction||c.app.currentView;d.sourceView=c.app.currentView;c.app.processRequest(d)})};jrt.Dialog.prototype.show=function(){this.parent=this.req.sourceView;jrt.Modal.prototype.show.call(this)};
jrt.Dialog.prototype.close=function(a){return jrt.Modal.prototype.close.call(this,a)?!0:this.app.currentView==this?(this.handleDialogClose(null),!0):!1};jrt.Dialog.prototype.setReturnValue=function(a){this.returnValue={};jrt.Form.getSubmitData(this.form.element,a,this.returnValue)};
jrt.Dialog.prototype.handleDialogClose=function(a){jrt.Modal.prototype.handleDialogClose.call(this,a);if(null==a)jrt.Runtime.trace("Dialog request cancelled "+this),this.app.currentView=this.req.sourceView;else{this.app.currentView=this.parent;if(this.app.closingDialogPendingRequest){jrt.Runtime.trace("Dialog auto-closed "+this);a=this.app.closingDialogPendingRequest;a.sourceView=this.app.currentView;a.source=this.app.currentAction||this.app.currentView;this.app.closingDialogPendingRequest=null;this.app.processRequest(a);
return}jrt.Runtime.trace("Dialog closed "+this);try{this.hidden(),this.caller.dialogClosed(this),this.app.dialogClosed(this)}catch(b){jrt.Runtime.log(null,b)}}"history"!=this.app.historyBackType?this.app.historyEnabled&&(this.app.historyBackType="close",history.back()):this.app.historyBackType=null};jrt.DialogBox=function(){jrt.Modal.apply(this,arguments)};$jscomp.inherits(jrt.DialogBox,jrt.Modal);jrt.DialogBox.prototype.show=function(){var a=this;this.parent=this.app?this.app.currentView:null;setTimeout(function(){jrt.Modal.prototype.show.call(a)})};
jrt.DialogBox.prototype.handleDialogClose=function(a){jrt.Modal.prototype.handleDialogClose.call(this,a);jrt.Runtime.trace("Dialog closed "+this);if(this.app)try{(this.app.currentAction||this.app.currentView).dialogClosed(this),this.app.dialogClosed(this)}catch(b){jrt.Runtime.log(null,b)}};jrt.DialogBox.prototype.toString=function(){return"<jrt.DialogBox>"};jrt.SystemDialogBox=function(a,b){jrt.DialogBox.call(this);this.options=Object.create(jrt.SystemDialogBox.defaultOptions);Object.assign(this.options,b);this.element.className=a+" box "+this.options.class;this.options.showCloseButton&&(a=jrt.Element.button("#back"),a.name="close",a.tabIndex=-1,this.element.appendChild(a));this.options.title&&(a=jrt.Element.create("h4",this.options.title),this.element.appendChild(a))};$jscomp.inherits(jrt.SystemDialogBox,jrt.DialogBox);
jrt.SystemDialogBox.setDefaultOptions=function(a){jrt.SystemDialogBox.defaultOptions=Object.create(jrt.SystemDialogBox.initialDefaultOptions);Object.assign(jrt.SystemDialogBox.defaultOptions,a)};jrt.SystemDialogBox.alert=function(a,b){a=new jrt.AlertBox(a,b);a.show();return a};jrt.SystemDialogBox.confirm=function(a,b){a=new jrt.ConfirmBox(a,b);a.show();return a};jrt.SystemDialogBox.prompt=function(a,b,c){a=new jrt.PromptBox(a,b,c);a.show();return a};
jrt.SystemDialogBox.image=function(a,b,c){return new jrt.ImageBox(a,b,c)};jrt.SystemDialogBox.prototype.appendForm=function(a){var b=jrt.Element.create("form");b.method="dialog";this.element.appendChild(b);a=Array.isArray(a)?a:[a.replace("\n","<br>")];a=$jscomp.makeIterator(a);for(var c=a.next();!c.done;c=a.next())this.para=jrt.Element.create("p",[c.value]),b.appendChild(this.para);this.buttons=jrt.Element.create("p","","buttons");b.appendChild(this.buttons);this.form=new jrt.Form(b)};
jrt.SystemDialogBox.initialDefaultOptions={title:"",class:"",showCloseButton:!1,translateButtons:!1,buttonTextOk:"OK",buttonTextCancel:"Cancel",buttonTextAlt:"",autofocus:"focus",rows:1};jrt.SystemDialogBox.defaultOptions=jrt.SystemDialogBox.initialDefaultOptions;jrt.AlertBox=function(a,b){jrt.SystemDialogBox.call(this,"alert",b);this.appendForm(a);a=jrt.Element.button("#back",this.options.translateButtons?jrt.LocaleBundle.current.translate(this.options.buttonTextOk):this.options.buttonTextOk);a.name="ok";this.buttons.appendChild(a)};$jscomp.inherits(jrt.AlertBox,jrt.SystemDialogBox);jrt.ConfirmBox=function(a,b){jrt.SystemDialogBox.call(this,"confirm",b);this.appendForm(a);a=this.options.translateButtons?jrt.LocaleBundle.current.translate(this.options.buttonTextCancel):this.options.buttonTextCancel;a=jrt.Element.button(null,a);a.type="submit";a.name="cancel";this.buttons.appendChild(a);this.options.buttonTextAlt&&(a=jrt.Element.button(null,this.options.translateButtons?jrt.LocaleBundle.current.translate(this.options.buttonTextAlt):this.options.buttonTextAlt),a.type="submit",a.name=
"alt",this.buttons.appendChild(a));a=jrt.Element.button(null,this.options.translateButtons?jrt.LocaleBundle.current.translate(this.options.buttonTextOk):this.options.buttonTextOk);a.type="submit";a.name="ok";this.buttons.appendChild(a)};$jscomp.inherits(jrt.ConfirmBox,jrt.SystemDialogBox);jrt.ConfirmBox.prototype.setReturnValue=function(a){this.returnValue="ok"==a.name?!0:""==this.options.buttonTextAlt?!1:"alt"==a.name?!1:null};jrt.PromptBox=function(a,b,c){jrt.SystemDialogBox.call(this,"prompt",c);this.appendForm(a);this.input=c.rows&&1<c.rows?jrt.Element.textarea("input",b||""):jrt.Element.input("text","input",b||"","field");this.input.autofocus="none"!=this.options.autofocus;"select"==this.options.autofocus&&this.input.setSelectionRange(0,999);this.para.appendChild(this.input);a=this.options.translateButtons?jrt.LocaleBundle.current.translate(this.options.buttonTextCancel):this.options.buttonTextCancel;a=jrt.Element.button("#back",
a);a.name="cancel";this.buttons.appendChild(a);a=jrt.Element.button(null,this.options.translateButtons?jrt.LocaleBundle.current.translate(this.options.buttonTextOk):this.options.buttonTextOk);a.type="submit";a.name="ok";this.buttons.appendChild(a)};$jscomp.inherits(jrt.PromptBox,jrt.SystemDialogBox);jrt.PromptBox.prototype.setReturnValue=function(a){this.returnValue=jrt.Form.getValue(this.input)};jrt.ImageBox=function(a,b,c){jrt.SystemDialogBox.call(this,"image",{title:b,className:c,showCloseButton:!0});b=new Image;b.onload=b.onerror=this.handleImageLoad.bind(this);b.src=a;this.element.appendChild(b)};$jscomp.inherits(jrt.ImageBox,jrt.SystemDialogBox);jrt.ImageBox.prototype.handleImageLoad=function(a){"load"==a.type&&this.show()};jrt.Template=function(a,b){this.template=a;this.target=b||a.parentElement;this.prevSibling=null==b?this.template.previousSibling:null;this.nextSibling=null==b?this.template.nextSibling:null;this.currentClone=null;null==b&&this.template.parentElement.removeChild(this.template)};
jrt.Template.prototype.clone=function(){for(var a=document.importNode(this.template.content,!0),b=0,c=[],d=0;d<a.childNodes.length;d++){var f=a.childNodes[d];f.nodeType==Node.COMMENT_NODE||f.nodeType==Node.TEXT_NODE&&!/\S/.test(f.nodeValue)||b++;f.nodeType==Node.ELEMENT_NODE&&c.push(f)}return 1==c.length&&1==b?this.currentClone=c[0]:this.currentClone=a};
jrt.Template.prototype.prepend=function(a){if(!a&&!this.currentClone)throw Error("Must create template clone before prepend");var b=a||this.currentClone,c=this.prevSibling?this.prevSibling.nextSibling:this.target.firstElementChild;c?this.target.insertBefore(b,c):this.target.appendChild(b);a||(this.currentClone=null);return b};
jrt.Template.prototype.append=function(a){if(!a&&!this.currentClone)throw Error("Must create template clone before append");var b=a||this.currentClone;this.nextSibling?this.target.insertBefore(b,this.nextSibling):this.target.appendChild(b);a||(this.currentClone=null);return b};
jrt.Template.prototype.clear=function(){if(this.prevSibling||this.nextSibling)for(var a=this.prevSibling?this.prevSibling.nextSibling:this.target.firstChild;a&&a!=this.nextSibling;){var b=a.nextSibling;a.parentElement.removeChild(a);a=b}else this.target.textContent="";this.currentClone=null};jrt.Serializable=function(a){this.app=jrt.App.instance;Object.defineProperty(this,"app",{enumerable:!1});a&&this.setProperties(a)};jrt.Serializable.objectToJson=function(a){return JSON.stringify(a,function(b,c){return c instanceof Set?{Set:Array.from(c)}:c instanceof Map?{Map:Array.from(c)}:c})};
jrt.Serializable.jsonToObject=function(a){var b=null;try{b=JSON.parse(a,function(c,d){if(d instanceof Object&&1==Object.keys(d).length){if(Array.isArray(d.Set))return new Set(d.Set);if(Array.isArray(d.Map))return new Map(d.Map)}return d})}catch(c){jrt.Runtime.log(null,c)}return b};jrt.Serializable.prototype.getProperties=function(){var a={},b;for(b in this)"function"!=typeof this[b]&&(a[b]=this[b]);return a};jrt.Serializable.prototype.setProperties=function(a){for(var b in a)this[b]=a[b]};jrt.LocalStorage=function(a,b,c){c=void 0===c?!0:c;jrt.Serializable.call(this,void 0===b?null:b);this.dataKey=a;Object.defineProperty(this,"dataKey",{enumerable:!1});this.compressed=c;Object.defineProperty(this,"compressed",{enumerable:!1})};$jscomp.inherits(jrt.LocalStorage,jrt.Serializable);
jrt.LocalStorage.isSupported=function(){if(null==jrt.LocalStorage.supported){jrt.LocalStorage.supported=!1;if("localStorage"in window)try{window.localStorage.getItem("test"),jrt.LocalStorage.supported=!0}catch(b){var a=b}jrt.LocalStorage.supported||jrt.Runtime.log("Local storage is not supported",a)}return jrt.LocalStorage.supported};
jrt.LocalStorage.keys=function(a){if(!jrt.LocalStorage.isSupported())return[];for(var b=[],c=0;c<window.localStorage.length;c++){var d=window.localStorage.key(c);null==a?b.push("!"==d.charAt(0)?d.slice(1):d):a?"!"==d.charAt(0)&&b.push(d.slice(1)):"!"!=d.charAt(0)&&b.push(d)}return b};jrt.LocalStorage.getItem=function(a,b){b=void 0===b?!1:b;return jrt.LocalStorage.isSupported()?(a=window.localStorage.getItem("!"+a)||window.localStorage.getItem(a))?b?jrt.LZW.decompress(a):a:null:null};
jrt.LocalStorage.setItem=function(a,b,c,d,f){c=void 0===c?!1:c;d=void 0===d?!1:d;f=void 0===f?!0:f;if(!jrt.LocalStorage.isSupported())return!1;c&&(a="!"+a);d&&(b=jrt.LZW.compress(b));c=!1;do{d=!1;try{window.localStorage.setItem(a,b),c=!0}catch(h){var l=h;if(f)for(var m=0;m<window.localStorage.length;m++){var n=window.localStorage.key(m);if("!"!=n.charAt(0)){window.localStorage.removeItem(n);d=!0;break}}}}while(d);c||jrt.Runtime.log(null,l);return c};
jrt.LocalStorage.getObject=function(a,b){return(a=jrt.LocalStorage.getItem(a,void 0===b?!0:b))&&jrt.Serializable.jsonToObject(a)};jrt.LocalStorage.setObject=function(a,b,c,d,f){c=void 0===c?!1:c;d=void 0===d?!0:d;f=void 0===f?!0:f;b=jrt.Serializable.objectToJson(b);return jrt.LocalStorage.setItem(a,b,c,d,f)};jrt.LocalStorage.removeItem=function(a){jrt.LocalStorage.isSupported()&&(window.localStorage.removeItem("!"+a),window.localStorage.removeItem(a))};
jrt.LocalStorage.clear=function(a){a=void 0===a?!1:a;if(jrt.LocalStorage.isSupported())if(a){a=$jscomp.makeIterator(jrt.LocalStorage.keys(!1));for(var b=a.next();!b.done;b=a.next())window.localStorage.removeItem(b.value)}else window.localStorage.clear()};jrt.LocalStorage.prototype.load=function(){var a=jrt.LocalStorage.getObject(this.dataKey,this.compressed);if(!a)return!1;var b;try{if(b=this.import(a))return!0;this.remove();return!1}catch(c){return this.app.processClientError(c),!1}};
jrt.LocalStorage.prototype.save=function(a){a=void 0===a?!0:a;if(this.isEmpty())this.remove();else{var b;try{(b=this.export())?jrt.LocalStorage.setObject(this.dataKey,b,a,this.compressed):this.remove()}catch(c){this.app.processClientError(c)}}};jrt.LocalStorage.prototype.remove=function(){jrt.LocalStorage.removeItem(this.dataKey);this.reset()};jrt.LocalStorage.prototype.import=function(a){this.setProperties(a);return!0};jrt.LocalStorage.prototype.export=function(){return this.getProperties()};
jrt.LocalStorage.prototype.reset=function(){for(var a in this)"function"!=typeof this[a]&&(this[a]=null)};jrt.LocalStorage.prototype.isEmpty=function(){for(var a in this)if("function"!=typeof this[a]&&null!=this[a])return!1;return!0};jrt.LZW=function(){};
jrt.LZW.compress=function(a){function b(p){p&&(d|=f);16384==f?(l.push(String.fromCharCode(d+32)),f=1,d=0):f<<=1}function c(){for(var p=0,q=n++;p!=q;){var t=p+q>>1;h>t?(p=t+1,b(1)):(q=t,b(0))}if(!p){-1!=h&&(p=e+1);do{for(q=8;q--;p=(p-p%2)/2)b(p%2);b(p)}while(p)}}for(var d=0,f=1,l=[],m=0,n=0,h=0,e,g=[],k=[];m<a.length;)if(e=a.charCodeAt(m++),g[h]){var r=g[h].indexOf(e);-1==r?(g[h].push(e),k[h].push(n+1),h&&m--,c(),h=0):h=k[h][r]}else g[h]=[e],k[h]=[n+1],h&&m--,c(),h=0;e=0;h&&c();h=-1;for(c();1!=f;)b(0);
return l.join("")};jrt.LZW.decompress=function(a){function b(){--f?l>>=1:(l=a.charCodeAt(c++)-32,f=15);return l&1}var c=0,d=0,f=1,l=0,m=[],n=[""],h="",e=0,g=0;do{e&&(n[d-1]=h[0]);e=g;m.push(h);var k=0;for(g=d++;k!=g;)b()?k=(k+g>>1)+1:g=k+g>>1;if(k)h=m[k]+n[k],n[d]=h[0];else{var r=1;do for(var p=8;p--;r*=2)k+=r*b();while(b());k&&(h=String.fromCharCode(k-1),n[d]="")}}while(k);return m.join("")};/*
 @private*/
jrt.LocaleBundle=function(a){a?-1==jrt.LocaleBundle.supportedLanguages.indexOf(a)?(this.lang=jrt.LocaleBundle.preferredLanguage,jrt.Runtime.log("Language '"+a+"' not supported, using '"+this.lang+"' instead")):this.lang=a:this.lang=jrt.LocaleBundle.preferredLanguage;if(!jrt.LocaleBundle.bundles[this.lang]){a=!0;var b=[];if(jrt.LocaleBundle.domains)for(var c=$jscomp.makeIterator(jrt.LocaleBundle.domains),d=c.next();!d.done;d=c.next()){d=d.value;try{b=b.concat(jrt.Ajax.loadJsonFile("locale/"+d+"/strings."+
this.lang+".json",!0))}catch(f){this.lang!=jrt.LocaleBundle.referenceLanguage&&(a=!1,jrt.Runtime.log("Error loading strings in '"+this.lang+"' for domain '"+d+"'",f))}}else try{b=jrt.Ajax.loadJsonFile("locale/strings."+this.lang+".json",!0)}catch(f){jrt.Runtime.log("Error loading strings in '"+this.lang+"'",f),a=!1}jrt.LocaleBundle.bundles[this.lang]=new Map(b);a&&jrt.Runtime.trace("Messages loaded for language '"+this.lang+"'")}jrt.LocaleBundle.current&&this.lang==jrt.LocaleBundle.current.lang||
(this.replaceDocumentStrings(),this.replaceLocalizedLinks(),this.includeDocs())};
jrt.LocaleBundle.setConfiguration=function(a,b,c){jrt.LocaleBundle.referenceLanguage=b||document.documentElement.lang||null;jrt.LocaleBundle.supportedLanguages=a||[jrt.LocaleBundle.referenceLanguage||"en"];jrt.LocaleBundle.domains=c||null;if(navigator.languages)for(a=0;a<navigator.languages.length;a++){if(b=navigator.languages[a].split("-")[0],-1!=jrt.LocaleBundle.supportedLanguages.indexOf(b)){jrt.LocaleBundle.preferredLanguage=b;break}}else navigator.language&&(a=navigator.language.split("-")[0],
-1!=jrt.LocaleBundle.supportedLanguages.indexOf(a)&&(jrt.LocaleBundle.preferredLanguage=a));jrt.LocaleBundle.preferredLanguage||(jrt.LocaleBundle.preferredLanguage=jrt.LocaleBundle.supportedLanguages[0])};jrt.LocaleBundle.setBundle=function(a){jrt.LocaleBundle.supportedLanguages||jrt.LocaleBundle.setConfiguration();return jrt.LocaleBundle.current=new jrt.LocaleBundle(a)};
jrt.LocaleBundle.prototype.replaceDocumentStrings=function(){function a(n,h){n.innerHTML=h;n=n.querySelectorAll("a");n=$jscomp.makeIterator(n);for(h=n.next();!h.done;h=n.next()){h=h.value;var e=h.getAttribute("href");"mailto:"==e||"mailto:?"==e.substr(0,8)?(e="mailto:"+h.textContent+e.substr(7),h.href=e,h.target="_blank"):"#"!=e.charAt(0)&&(h.target="_blank")}}var b=""!=document.documentElement.lang;if(1<jrt.LocaleBundle.supportedLanguages.length&&jrt.LocaleBundle.referenceLanguage&&(this.lang!=jrt.LocaleBundle.referenceLanguage||
b)){b=document.querySelectorAll("h1, h2, h3, h4, h5, h6, summary, thead > tr > td, th, a, button, label, option, [placeholder], s, [translate='yes']");b=$jscomp.makeIterator(b);for(var c=b.next();!c.done;c=b.next())if(c=c.value,!c.dataset.msgid&&!1!==c.translate){if(0==c.children.length){var d=c.dataset.text;d&&this.lang==jrt.LocaleBundle.referenceLanguage&&(c.dataset.text="");if(c instanceof HTMLInputElement||c instanceof HTMLTextAreaElement){var f=c;d||(d=f.placeholder.trim());d&&(f.placeholder=
this.translate(d))}else c instanceof HTMLImageElement?(f=c,d||(d=f.alt.trim()),d&&(f.alt=this.translate(d))):(d||(d=c.textContent.trim()),d&&(c.textContent=this.translate(d)));d&&this.lang!=jrt.LocaleBundle.referenceLanguage&&(c.dataset.text=d)}(d=c.dataset.title)?this.lang==jrt.LocaleBundle.referenceLanguage&&(c.dataset.title=""):(d=c.title)&&this.lang!=jrt.LocaleBundle.referenceLanguage&&(c.dataset.title=d);d&&(c.title=this.translate(d))}}b=document.querySelectorAll("[data-msgid]");b=$jscomp.makeIterator(b);
for(c=b.next();!c.done;c=b.next())if(c=c.value,"placeholder"in c)try{c.placeholder=this.getString(c.dataset.msgid)}catch(n){jrt.Runtime.log(null,n)}else if(d=this.getMessage(c.dataset.msgid)||"","string"==typeof d)(f=c.dataset.msgparam)&&(d=d.replace("%s",f)),a(c,d);else if(Array.isArray(d))if(0==c.children.length){c.textContent="";f="UL"==c.tagName||"OL"==c.tagName?"li":"p";for(var l=0;l<d.length;l++){var m=jrt.Element.create(f);a(m,d[l]);c.appendChild(m)}}else for(f=0;f<c.children.length&&f<d.length;f++)a(c.children[f],
d[f]);document.documentElement.lang=this.lang};jrt.LocaleBundle.prototype.replaceLocalizedLinks=function(){var a=document.querySelectorAll("a[data-href-"+this.lang+"], a[data-href]");a=$jscomp.makeIterator(a);for(var b=a.next();!b.done;b=a.next())b=b.value,b.hasAttribute("data-href-"+this.lang)?("href"in b.dataset||(b.dataset.href=b.href),b.href=b.getAttribute("data-href-"+this.lang)):b.href=b.dataset.href};
jrt.LocaleBundle.prototype.includeDocs=function(){var a=document.querySelectorAll("[data-docid]");a=$jscomp.makeIterator(a);for(var b=a.next();!b.done;b=a.next()){b=b.value;var c=b.dataset.docid,d=c.split("/").pop();c="locale/"+c+"/"+d+"."+this.lang+".html";try{jrt.Ajax.include(c,b);for(var f in b.dataset)for(var l=b.dataset[f],m=b.querySelectorAll('[data-name="'+f+'"]'),n=$jscomp.makeIterator(m),h=n.next();!h.done;h=n.next()){var e=h.value;e instanceof HTMLImageElement?e.src=l:e instanceof HTMLAnchorElement?
(d=e,d.href=l,d.rel="external",d.target="_blank",""==d.textContent&&("mailto:"==l.substr(0,7)?d.textContent=l.substr(7):"http://"==l.substr(0,7)?d.textContent=l.substr(7):"https://"==l.substr(0,8)&&(d.textContent=l.substr(8)))):"INPUT"!=e.tagName||e.hasAttribute("type")?e.textContent=b.dataset[f]:e.parentElement.replaceChild(document.createTextNode(b.dataset[f]),e)}jrt.Runtime.trace("Localized document '"+c+"' included")}catch(g){jrt.Runtime.log("Error including localized document '"+c+"'",g)}}};
jrt.LocaleBundle.prototype.translate=function(a,b,c){if("number"==typeof b)return 1===b&&c?this.getTranslation(c):this.getTranslation(a).replace("%s",b.toString());if(null==b)return this.getTranslation(a);a=this.getTranslation(a);"string"==typeof b&&(b=[b]);for(c=0;c<b.length;c++)a=a.replace("%s",b[c]);return a};
jrt.LocaleBundle.prototype.getTranslation=function(a){if(this.lang!=jrt.LocaleBundle.referenceLanguage){var b=jrt.LocaleBundle.bundles[this.lang].get(a);null==b?jrt.Runtime.log('Translation for "'+a+'" not found'):"string"!=typeof b&&(b="",jrt.Runtime.log('Translation for "'+a+'" is not a string'))}return b||a};
jrt.LocaleBundle.prototype.getString=function(a,b,c){"number"==typeof b?1==b&&c?(c=this.getMessage(c),b=null):(c=this.getMessage(a),b=[b.toString()]):(c=this.getMessage(a),"string"==typeof b&&(b=[b]));if(Array.isArray(c))throw Error("Trying to get array '"+a+"' as string");if(b)for(a=$jscomp.makeIterator(b),b=a.next();!b.done;b=a.next())c=c.replace("%s",b.value);return c};
jrt.LocaleBundle.prototype.getStringArray=function(a){var b=this.getMessage(a);if("string"==typeof b)throw Error("Trying to get string '"+a+"' as array");return b};jrt.LocaleBundle.prototype.getMessage=function(a){var b=jrt.LocaleBundle.bundles[this.lang].get(a);null==b&&jrt.Runtime.log("Message for '"+a+"' not found");return b||""};jrt.LocaleBundle.supportedLanguages=[];jrt.LocaleBundle.referenceLanguage=null;jrt.LocaleBundle.preferredLanguage="";jrt.LocaleBundle.domains=null;
jrt.LocaleBundle.bundles={};jrt.LocaleBundle.current=null;var dialogPolyfill={};
(function(){function a(e){for(var g={};e&&e!==document.body;){g.$jscomp$loop$prop$s$32=window.getComputedStyle(e);var k=function(r){return function(p,q){return!(void 0===r.$jscomp$loop$prop$s$32[p]||r.$jscomp$loop$prop$s$32[p]===q)}}(g);if(1>g.$jscomp$loop$prop$s$32.opacity||k("zIndex","auto")||k("transform","none")||k("mixBlendMode","normal")||k("filter","none")||k("perspective","none")||"isolate"===g.$jscomp$loop$prop$s$32.isolation||"fixed"===g.$jscomp$loop$prop$s$32.position||"touch"===g.$jscomp$loop$prop$s$32.webkitOverflowScrolling)return!0;
e=e.parentElement;g={$jscomp$loop$prop$s$32:g.$jscomp$loop$prop$s$32}}return!1}function b(e){for(;e;){if("dialog"===e.localName)return e;e=e.parentElement}return null}function c(e){e&&e.blur&&e!==document.body&&e.blur()}function d(e){return e&&e.hasAttribute("method")?"dialog"===e.getAttribute("method").toLowerCase():!1}function f(e){this.dialog_=e;this.openAsModal_=this.replacedStyleTop_=!1;e.hasAttribute("role")||e.setAttribute("role","dialog");e.show=this.show.bind(this);e.showModal=this.showModal.bind(this);
e.close=this.close.bind(this);"returnValue"in e||(e.returnValue="");if("MutationObserver"in window)(new MutationObserver(this.maybeHideModal.bind(this))).observe(e,{attributes:!0,attributeFilter:["open"]});else{var g=!1,k=function(){g?this.downgradeModal():this.maybeHideModal();g=!1}.bind(this),r,p=function(q){q.target===e&&(g|="DOMNodeRemoved"===q.type.substr(0,14),window.clearTimeout(r),r=window.setTimeout(k,0))};["DOMAttrModified","DOMNodeRemoved","DOMNodeRemovedFromDocument"].forEach(function(q){e.addEventListener(q,
p)})}Object.defineProperty(e,"open",{set:this.setOpen.bind(this),get:e.hasAttribute.bind(e,"open")});this.backdrop_=document.createElement("div");this.backdrop_.className="backdrop";this.backdrop_.addEventListener("click",this.backdropClick_.bind(this))}if(!("HTMLDialogElement"in window)){document.head.insertBefore(document.createElement("style"),document.head.firstElementChild).textContent="\ndialog {\n  position: absolute;\n  left: 0; right: 0;\n  width: -moz-fit-content;\n  width: -webkit-fit-content;\n  width: fit-content;\n  margin: auto;\n  border: solid;\n  padding: 1em;\n  background: white;\n  color: black;\n  display: block;\n}\n\ndialog:not([open]) {\n  display: none;\n}\n\ndialog + .backdrop {\n  position: fixed;\n  top: 0; right: 0; bottom: 0; left: 0;\n  background: rgba(0,0,0,0.1);\n}\n\n._dialog_overlay {\n  position: fixed;\n  top: 0; right: 0; bottom: 0; left: 0;\n}\n\ndialog.fixed {\n  position: fixed;\n  top: 50%;\n  transform: translate(0, -50%);\n}\n";
f.prototype={get dialog(){return this.dialog_},maybeHideModal:function(){this.dialog_.hasAttribute("open")&&document.body.contains(this.dialog_)||this.downgradeModal()},downgradeModal:function(){this.openAsModal_&&(this.openAsModal_=!1,this.dialog_.style.zIndex="",this.replacedStyleTop_&&(this.dialog_.style.top="",this.replacedStyleTop_=!1),this.backdrop_.parentNode&&this.backdrop_.parentNode.removeChild(this.backdrop_),dialogPolyfill.dm.removeDialog(this))},setOpen:function(e){e?this.dialog_.hasAttribute("open")||
this.dialog_.setAttribute("open",""):(this.dialog_.removeAttribute("open"),this.maybeHideModal())},backdropClick_:function(e){if(this.dialog_.hasAttribute("tabindex"))this.dialog_.focus();else{var g=document.createElement("div");this.dialog_.insertBefore(g,this.dialog_.firstChild);g.tabIndex=-1;g.focus();this.dialog_.removeChild(g)}g=document.createEvent("MouseEvents");g.initMouseEvent(e.type,e.bubbles,e.cancelable,window,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,
e.metaKey,e.button,e.relatedTarget);this.dialog_.dispatchEvent(g);e.stopPropagation()},focus_:function(){var e=this.dialog_.querySelector("[autofocus]:not([disabled])");!e&&0<=this.dialog_.tabIndex&&(e=this.dialog_);e||(e=["button","input","keygen","textarea"].map(function(g){return g+":not([disabled])"}),e.push('[tabindex]:not([disabled]):not([tabindex=""])'),e=this.dialog_.querySelector(e.join(", ")));c(document.activeElement);e&&e.focus()},updateZIndex:function(e,g){if(e<g)throw Error("dialogZ should never be < backdropZ");
this.dialog_.style.zIndex=e;this.backdrop_.style.zIndex=g},show:function(){this.dialog_.open||(this.setOpen(!0),this.focus_())},showModal:function(){if(this.dialog_.hasAttribute("open"))throw Error("Failed to execute 'showModal' on dialog: The element is already open, and therefore cannot be opened modally.");if(!document.body.contains(this.dialog_))throw Error("Failed to execute 'showModal' on dialog: The element is not in a Document.");if(!dialogPolyfill.dm.pushDialog(this))throw Error("Failed to execute 'showModal' on dialog: There are too many open modal dialogs.");
a(this.dialog_.parentElement)&&console.warn("A dialog is being shown inside a stacking context. This may cause it to be unusable.");this.setOpen(!0);this.openAsModal_=!0;dialogPolyfill.needsCentering(this.dialog_)?(dialogPolyfill.reposition(this.dialog_),this.replacedStyleTop_=!0):this.replacedStyleTop_=!1;this.dialog_.parentNode.insertBefore(this.backdrop_,this.dialog_.nextSibling);this.focus_()},close:function(e){if(!this.dialog_.hasAttribute("open"))throw Error("Failed to execute 'close' on dialog: The element does not have an 'open' attribute, and therefore cannot be closed.");
this.setOpen(!1);void 0!==e&&(this.dialog_.returnValue=e);setTimeout(function(){var g=this.dialog_.onclose;"function"==typeof g&&(this.dialog_.onclose({type:"close",bubbles:!1,cancelable:!1,composed:!1,defaultPrevented:!1,isTrusted:!0,eventPhase:Event.AT_TARGET,target:this.dialog_,currentTarget:this.dialog_,returnValue:this.dialog_.returnValue}),this.dialog_.onclose=null);var k=new CustomEvent("close",{bubbles:!1,cancelable:!1});this.dialog_.dispatchEvent(k);this.dialog_.onclose=g}.bind(this),0)}};
dialogPolyfill.reposition=function(e){var g=document.body.scrollTop||document.documentElement.scrollTop;e.style.top=Math.max(g,g+(window.innerHeight-e.offsetHeight)/2)+"px"};dialogPolyfill.isInlinePositionSetByStylesheet=function(e){for(var g=0;g<document.styleSheets.length;++g){var k=document.styleSheets[g],r=null;try{r=k.cssRules}catch(u){}if(r)for(k=0;k<r.length;++k){var p=r[k],q=null;try{q=document.querySelectorAll(p.selectorText)}catch(u){}var t;if(!(t=!q)){a:{for(t=0;t<q.length;++t)if(q[t]===
e){q=!0;break a}q=!1}t=!q}if(!t&&(q=p.style.getPropertyValue("top"),p=p.style.getPropertyValue("bottom"),q&&"auto"!==q||p&&"auto"!==p))return!0}}return!1};dialogPolyfill.needsCentering=function(e){return"absolute"!==window.getComputedStyle(e).position||"auto"!==e.style.top&&""!==e.style.top||"auto"!==e.style.bottom&&""!==e.style.bottom?!1:!dialogPolyfill.isInlinePositionSetByStylesheet(e)};dialogPolyfill.registerDialog=function(e){if(!e.showModal){if("dialog"!==e.localName)throw Error("Failed to register dialog: The element is not a dialog.");
new f(e)}};dialogPolyfill.DialogManager=function(){this.pendingDialogStack=[];var e=this.checkDOM_.bind(this);this.overlay=document.createElement("div");this.overlay.className="_dialog_overlay";this.overlay.addEventListener("click",function(g){this.forwardTab_=void 0;g.stopPropagation();e([])}.bind(this));this.handleKey_=this.handleKey_.bind(this);this.handleFocus_=this.handleFocus_.bind(this);this.zIndexLow_=1E5;this.zIndexHigh_=100150;this.forwardTab_=void 0;"MutationObserver"in window&&(this.mo_=
new MutationObserver(function(g){var k=[];g.forEach(function(r){for(var p=0,q;q=r.removedNodes[p];++p)q instanceof Element&&("dialog"===q.localName&&k.push(q),k=k.concat(q.querySelectorAll("dialog")))});k.length&&e(k)}))};dialogPolyfill.DialogManager.prototype.blockDocument=function(){document.documentElement.addEventListener("focus",this.handleFocus_,!0);document.addEventListener("keydown",this.handleKey_);this.mo_&&this.mo_.observe(document,{childList:!0,subtree:!0})};dialogPolyfill.DialogManager.prototype.unblockDocument=
function(){document.documentElement.removeEventListener("focus",this.handleFocus_,!0);document.removeEventListener("keydown",this.handleKey_);this.mo_&&this.mo_.disconnect()};dialogPolyfill.DialogManager.prototype.updateStacking=function(){for(var e=this.zIndexHigh_,g=0,k;k=this.pendingDialogStack[g];++g)k.updateZIndex(--e,--e),0===g&&(this.overlay.style.zIndex=--e);(e=this.pendingDialogStack[0])?(e.dialog.parentNode||document.body).appendChild(this.overlay):this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay)};
dialogPolyfill.DialogManager.prototype.containedByTopDialog_=function(e){for(;e=b(e);){for(var g=0,k;k=this.pendingDialogStack[g];++g)if(k.dialog===e)return 0===g;e=e.parentElement}return!1};dialogPolyfill.DialogManager.prototype.handleFocus_=function(e){if(!this.containedByTopDialog_(e.target)&&(e.preventDefault(),e.stopPropagation(),c(e.target),void 0!==this.forwardTab_)){var g=this.pendingDialogStack[0];g.dialog.compareDocumentPosition(e.target)&Node.DOCUMENT_POSITION_PRECEDING&&(this.forwardTab_?
g.focus_():document.documentElement.focus());return!1}};dialogPolyfill.DialogManager.prototype.handleKey_=function(e){this.forwardTab_=void 0;if(27===e.keyCode){e.preventDefault();e.stopPropagation();e=new CustomEvent("cancel",{bubbles:!1,cancelable:!0});var g=this.pendingDialogStack[0];g&&g.dialog.dispatchEvent(e)&&g.dialog.close()}else 9===e.keyCode&&(this.forwardTab_=!e.shiftKey)};dialogPolyfill.DialogManager.prototype.checkDOM_=function(e){this.pendingDialogStack.slice().forEach(function(g){-1!==
e.indexOf(g.dialog)?g.downgradeModal():g.maybeHideModal()})};dialogPolyfill.DialogManager.prototype.pushDialog=function(e){if(this.pendingDialogStack.length>=(this.zIndexHigh_-this.zIndexLow_)/2-1)return!1;1===this.pendingDialogStack.unshift(e)&&this.blockDocument();this.updateStacking();return!0};dialogPolyfill.DialogManager.prototype.removeDialog=function(e){e=this.pendingDialogStack.indexOf(e);-1!==e&&(this.pendingDialogStack.splice(e,1),0===this.pendingDialogStack.length&&this.unblockDocument(),
this.updateStacking())};dialogPolyfill.dm=new dialogPolyfill.DialogManager;dialogPolyfill.formSubmitter=null;dialogPolyfill.useValue=null;var l=document.createElement("form");l.setAttribute("method","dialog");if("dialog"!==l.method&&(l=Object.getOwnPropertyDescriptor(HTMLFormElement.prototype,"method"))){var m=l.get;l.get=function(){return d(this)?"dialog":m.call(this)};var n=l.set;l.set=function(e){return"string"===typeof e&&"dialog"===e.toLowerCase()?this.setAttribute("method",e):n.call(this,e)};
Object.defineProperty(HTMLFormElement.prototype,"method",l)}document.addEventListener("click",function(e){dialogPolyfill.formSubmitter=null;dialogPolyfill.useValue=null;if(!e.defaultPrevented){var g=e.target;if(g&&d(g.form)){if(!("submit"===g.type&&-1<["button","input"].indexOf(g.localName))){if("input"!==g.localName||"image"!==g.type)return;dialogPolyfill.useValue=e.offsetX+","+e.offsetY}b(g)&&(dialogPolyfill.formSubmitter=g)}}},!1);var h=HTMLFormElement.prototype.submit;HTMLFormElement.prototype.submit=
function(){if(!d(this))return h.call(this);var e=b(this);e&&e.close()};document.addEventListener("submit",function(e){var g=e.target;if(d(g)&&(e.preventDefault(),e=b(g))){var k=dialogPolyfill.formSubmitter;k&&k.form===g?e.close(dialogPolyfill.useValue||k.value):e.close();dialogPolyfill.formSubmitter=null}},!0)}})();
